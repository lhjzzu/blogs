## 编译过程

### 预处理

预处理(预编译)过程主要处理那些源代码文件中的以“#”开始的预编译指令

+ 将所有的"#define"删除,并且展开所有的宏定义

+ 处理所有条件预编译指令,比如"#if"、"#ifdef"、"#elif"、"#else"、 "#endif"

+ 处理"#include"预编译指令,将被包含的文件插入到该预编译指令的位置。注意,这个过程是递归进行的,也就是说被包含的文件可能还包含其他文件

+ 删除所有的注释"//"和"/**/"

+ 添加行号和文件名标识,比如#2  "helo.c" 2,以便于编译时编译器产生调试用的行号

  信息及用于编译时产生编译错误或警告时能够显示行号

+ 保留所有的#pragma编译器指令,因为编译器须要使用它们

### 编译

+ 词法分析
  - 使用词法分析器(扫描器), 将由编程语言描述的代码切分成单词，并同
    时给出单词的语义值。换言之，就是给出 token 序列
+ 语法分析：将词法分析的结果生成语法树
+ 语义分析: 通过解析代码获得语法树后，接着就要解析语法树，除去多余的内容，添加必要的信息，
  生成抽象语法树（Abstract Syntax Tree，AST）这样一种数据结构。上述处理就是语义分析
  （semantic analysis）
  - 区分变量为局部变量还是全局变量
  - 解析变量的声明和引用
  - 变量和表达式的类型检查
  - 检查在引用变量之前是否进行了初始化
  - 检查函数是否按照定义返回了结果
+ 生成中间代码: 生成抽象语法树后， 接着将抽象语法树转化为只在编译器内部使用的中间代码（Intermediate Representation，IR）
+ 代码生成:  最后把中间代码转换为汇编语言，这个阶段称为代码生成（code generation）。负责代码生
  成的程序模块称为代码生成器（code generator）
+ 优化: 优化可以在编译器的各个环节进行
  - 可以对抽象语法树进行优化
  - 可以对抽象语法树进行优化
  - 可以对抽象语法树进行优化

### 汇编

+ 使用汇编器将汇编代码生成对应的目标文件

###链接

+ 将目标文件与库进行链接，生成可执行文件



